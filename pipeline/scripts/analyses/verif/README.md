PROTEIN DOMAIN ANALYSIS ON PROTEOMES
====================================

## Settings 

We will use "uv" to run snakemake because it is the easisest way of managing python pacakges and versions especially when we hav no root permission.

Type :
```
uv init
uv add pandas
uv add hmmer
uv add Bio
```

R has to be installed with the package Biostrings

## Configuration files

- `analyse.json` file :

```
{ 
  "mode": "",  
  "storagetype": "irods",
  "analyse_dir_name": "verif/",
  "resources_dir_name": "protein_domain_PRDM9/", 
  "domain_references" : {
"SET":"Domain_SET_ReferenceAlignment2024",
"KRAB":"Domain_KRAB_ReferenceAlignment2024",
"SSXRD":"Domain_SSXRD_ReferenceAlignment2024",
"ZF":"Domain_ZF_unit_ReferenceAlignment2024"
},
  "domains" :  ["SET"],    
  "domains_simple" : ["SSXRD","ZF","KRAB"],
}

```
> [!CAUTION]
> "analyse_dir_name" describes the directory where the  results are stored. It should be modified for eache analyse! 





The directories are structured as follows
RESOURCES_DIR_NAME/
...........reference_alignments/ (should be present at start)
.............................. DOMAIN1/
..................................... Reference_alignement_DOMAIN1.fst
.......................................[Paralogous_alignement_DOMAIN1.fst](if DOMAIN1 is selected for paralogous analysis) 
.......................................[Paralogous_alignement_DOMAIN1.fst](if DOMAIN1 is selected for paralogous analysis) 
...............................DOMAIN2/
.......................................Reference_alignement_DOMAIN2.fst
.......................................[Paralogous_alignement_DOMAIN2.fst](if DOMAIN2 is selected for paralogous analysis) 
.......................................[Paralogous_alignement_DOMAIN2.fst](if DOMAIN2 is selected for paralogous analysis) 
...........hmm_profiles/ (will be generated by the pipeline)
........................DOMAIN1/
............................... Reference_alignement_DOMAIN1.hmm
................................[Paralogous_alignement_DOMAIN1.hmm](if DOMAIN1 is selected for paralogous analysis) 
................................[Paralogous_alignement_DOMAIN1.hmm](if DOMAIN1 is selected for paralogous analysis) 
........................DOMAIN2/
................................Reference_alignement_DOMAIN2.hmm
............................... [Paralogous_alignement_DOMAIN2.hmm](if DOMAIN2 is selected for paralogous analysis) 
................................[Paralogous_alignement_DOMAIN2.hmm](if DOMAIN2 is selected for paralogous analysis) 
...........hmm_databases/ (will be generated by the pipeline)
........................[database_DOMAIN1.hmm{.h3i,.h3f,.h3m.h3p}] (if DOMAIN1 is selected for paralogous analysis)
........................[database_DOMAIN2.hmm{.h3i,.h3f,.h3m.h3p}] (if DOMAIN2 is selected for paralogous analysis)


- `assemblies.json` file :
  The file contains the list of assemblies to be processed.



## Run the domain analysis on protein data

`uv run snakemake -s ../utils/process_stats_domain.smk  --jobs 1`

## Run the zf analysis on protein data

`uv run snakemake -s ../utils/process_zincfinger.smk  --jobs 1`

## Run the zf analysis on the dna sequence  coding for the protein data

`uv run snakemake -s ../utils/process_zincfinger_dna.smk  --jobs 1`
