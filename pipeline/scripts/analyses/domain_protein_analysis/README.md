# Lancer la recherche de de plusieurs domaines dans les protéomes

Ce pipeline lance la recherche de plusieurs dans les protéomes.


Le fichier de configuration est sous la forme

```json

{ 
  "mode": "",
  "analyse_dir_name": "domain_example/",
  "domain_references" : {
"SET":"Domain_SET_ReferenceAlignment2024",
"KRAB":"Domain_KRAB_ReferenceAlignment2024",
"SSXRD":"Domain_SSXRD_ReferenceAlignment2024",
"ZF":"Domain_ZF_unit_ReferenceAlignment2024",
},
  "domains" :  ["SET"],    
  "domains_simple" : ["KRAB","SSXRD","ZF"],   
  "assembly_list": [
"GCF_029281585.2" , 
"GCF_029289425.2" , 
"GCF_028885625.2" , 
"GCF_028858775.2" , 
"GCF_028885655.2" , 
"GCF_000001405.40" 
]  
}
```

* Le champ "mode" indique si les calculs hmm doivent utiliser l'executable via guix (_guix_).

* Le champ  "analyse_dir_name" donne le nom de l'analyse, à utiliser pour connaître l'emplacement des entrées et des sorties.

* Le champ "domain_references" associe un alignement de référence à chaque domaine.

* Le champ "domains" indique les domaines pour lesquels une recherche complete (avec verification des paralogues) est effectuée.

* Le champ "domains_simple" indique les domaines pour lesquels une recherche simple (sans verification des paralogues) est effectuée.

* Le champ "assembly_list" donne la liste des assemblages à analyser. La valeur de ce champ peut être 
générée en utilisant le script décrit dans le pipeline  get_genomes_list (cf https://github.com/simonpenel/gtdrift_template/tree/master/pipeline/scripts/analyses#3-g%C3%A9n%C3%A9rer-la-liste-des-assemblages-au-format--fichiers-json).

> Organisation des repertoires resources:

Le répertoire _pathGTDriftResource_  contient le répertoire _analyse_dir_name_ organisé comme suit

```

reference_alignments/ (should be present at start)
................... DOMAIN1/
........................... Reference_alignement_DOMAIN1.fst
............................[Paralogous_alignement_DOMAIN1.fst](if DOMAIN1 is selected for paralogous analysis) 
............................[Paralogous_alignement_DOMAIN1.fst](if DOMAIN1 is selected for paralogous analysis) 
....................DOMAIN2/
............................Reference_alignement_DOMAIN2.fst
............................[Paralogous_alignement_DOMAIN2.fst](if DOMAIN2 is selected for paralogous analysis) 
............................[Paralogous_alignement_DOMAIN2.fst](if DOMAIN2 is selected for paralogous analysis) 
hmm_profiles/ (will be generated by the pipeline)
.............DOMAIN1/
.................... Reference_alignement_DOMAIN1.hmm
.....................[Paralogous_alignement_DOMAIN1.hmm](if DOMAIN1 is selected for paralogous analysis) 
.....................[Paralogous_alignement_DOMAIN1.hmm](if DOMAIN1 is selected for paralogous analysis) 
.............DOMAIN2/
.....................Reference_alignement_DOMAIN2.hmm
.................... [Paralogous_alignement_DOMAIN2.hmm](if DOMAIN2 is selected for paralogous analysis) 
.....................[Paralogous_alignement_DOMAIN2.hmm](if DOMAIN2 is selected for paralogous analysis) 
hmm_databases/ (will be generated by the pipeline)
.............[database_DOMAIN1.hmm{.h3i,.h3f,.h3m.h3p}] (if DOMAIN1 is selected for paralogous analysis)
.............[database_DOMAIN2.hmm{.h3i,.h3f,.h3m.h3p}] (if DOMAIN2 is selected for paralogous analysis)

```

> Lancer l'analyse avec la commande:

```
snakemake -s process_stats_domain.smk -c 1
```


